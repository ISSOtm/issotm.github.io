<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>ISSOtm's website &bull; Pok&eacute;mon Exploits</title>

		<!-- Bootstrap -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		
		<link rel="stylesheet" href="../../css/common.css">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body>
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="https://issotm.github.io/">ISSOtm's website</a>
				</div>
				<div id="navbar" class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li><a href="../../aboutme.html">About me</a></li>
						<li><a href="../../aevilia.html">Aevilia</a></li>
						<li>8F Helper</li>
						<li><a href="http://prama-initiative.com/8F/beta/">GBZ80 to Items</a></li>
						<li class="active"><a href="../../pokexploits/">Pok&eacute;sploitz</a></li>
						<li>The rest</li>
					</ul>
			</div>
		</nav>
		
		
		<div class="container">
			<h1>Taking The April Fools Very Seriously</h1>
			<p class="lead">
				"Hey dude, there's been a nice challenge released for April Fools ! It's based off hacking Pokémon Blue, and it's super cool !"
				<br />
				"That's all ?"
				<br />
				"No ! When you finish, it gives you a code you enter at <a href="https://zzazzdzz.github.io/fools2017/">zzazzdzz.github.io/fools2017/</a> and it registers a score !!"
				<br />
				"Ooh, nice !"
				<br />
				"There's even achievements, one of them supposedly <q>cannot be obtained through normal means</q>.
				<br />
				<br />
				Normal reaction :
				<br />
				"Wow dude, let's play this !"
				<br />
				<br />
				Better reaction :
				<br />
				"Okay. LET'S GET THIS ACHIEVEMENT."
				<br />
				(Spoiler : I had the second)
			</p>
			
			<hr>
			
			<h2>Trivia</h2>
			<p><small>Skip this if you want. It's just some context.</small></p>
			<p>
				We all in the Pok&eacute;mon glitching community have a tradition on April the 1st.
				<br />
				At least the three "major" YouTubers in the community : TheZZAZZGlitch, Torchickens / ChickasaurusGL, and Crystal_
				<br />
				<small>The first one that says "Verlisify" gets instant death. All others too.</small>
				<br />
				<br />
				Crystal_ recorded on their GBA Gold being called by Rick Astley who performed a song never heard before.
				<br />
				The April Fools was that it obviously was Youngster Joey.
				<br />
				<br />
				Torchickens presented a video of a cool beta secret, namely an access to the famed Could City (yup).
				<br />
				This time the joke was that it was an alpha secret. Or maybe gamma, I'm not sure.
				<br />
				<br />
				TheZZAZZGlitch found a way to cure cancer, make pizza and coffee, using Pokémon Blue ACE. He offered a download link to the save file if we wanted to try this ourselves.
				<br />
				However Missingno. wanted revenge from his defeat last year, and inserted himself into the save file.
				<br />
				Sorry to all cancerous people, we have lost a way to cure you all. Blame Missingno.
			</p>
			
			<h2>The Game</h2>
			<p>
				The game is a fully normal Pok&eacute;mon Blue. Then what's the deal ? It's the save file.
				<br />
				As soon as you load it, you are unable to move, and Missingno. (I suppose) welcomes us... and corrupts the map to block us !
			</p>
			<p>
				The challenge is to use cheating to complete the game. You have to ; there's really no way to complete the game legit.
				<br />
				At the end of the game, you are given a password that you place here : <a href="https://zzazzdzz.github.io/fools2017">zzazzdzz.github.io/fools2017/</a>.
				<br />
				This saves your completion time as well as a few achievements. This also allows you to enter a small message that will be displayed in the results video (not published yet).
				<br />
				The page is a leaderboard, that lists the 50 best scores. All other scores are saved but not displayed.
			</p>
			
			<h2>A few details :</h2>
			<p>
				Achievements are kept between playthroughs, meaning it's possible to play slowly and get achievements, and then play fast but don't care about achievements.
			</p>
			<p>
				The game has an anti-timer cheating protection. Obviously you can bypass it.
				<br />
				I didn't reverse engineer the timer code, but it appeared that the in-game time at the end of the Hall of Fame sequence doesn't always match up with the run's time.
				<br />
				My best guess is that the timer keeps running a bit after the HoF sequence starts.
			</p>
			<p>
				Also, it isn't possible to use the same code twice. We will see how to bypass this later.
			</p>
			
			<h2>Getting scores</h2>
			<p>This section focuses on getting points, by first getting achievements, and then completing the game as fast as possible.</p>
			<p>I recommend using the emulator BGB for its powerful debugging utilities. It helps for most of the stuff listed here, but I agree that it's not user-friendly the first time you see it.</p>
			
			<h3>First playthrough</h3>
			<p>This section's goal is simply to complete the game using the most "intended" path.</p>
			<p>The first room is easy to traverse ; Missingno. hints you at using a WTW cheat. REALLY easy one, bub.</p>
			<p>
				The second room can be traversed by setting your money to 999999 (the cheat is also famous) and talking to the guard.
				<br />You then need to use the item RIVAL's while facing down, go through the blockade while invisible, and then open your Pokemon menu. Then walk.
			</p>
			<p>
				Next is real easy. Talk to Bruno, set Missingno.'s HP to zero, set the opponent's speed to something low (or just attack, he seems to miss a lot), and use Splash. Pow, ded.
				<br />
				Some friends told me they used the "run away" cheat. That also works, but "top percentage" cannot be unlocked if you run away.
			</p>
			<p>Get 4F from Bruno, and go to the next room. You have to alternate the second entry between both values and move around. Note that if you complete the puzzle without pressing up, that's a free achievement.</p>
			<p>The next room, just give yourself a Chansey (look up the <a href="http://gitchcity.info/wiki/The_Big_HEX_List">Big HEX List</a> for the argument). Done !</p>
			<p>The last room's puzzle is the simplest : use ClearSAV through 4F. Watch the Hall of Fame sequence and grab your code !</p>
			
			<h3>Achievements</h3>
			<h4>I'm good on my own</h4>
			<p>This one is one of the easiest. All you have to do is exit the second room without using any items. There are many ways to do this, one of them is in the "speedrunning" section.</p>
			<h4>Top percentage</h4>
			<p>This one is probably the easiest of all. Giving your Magikarp 255 EXP before the Bruno fight (or actually before fainting the opposing Missingno.). It should level up to level 10. Don't thank me, no need.</p>
			<h4>0x Up Presses</h4>
			<p>In the room where you have to change the map with 4F, just never press Up except in menus. It's really easy to do, and again, the speedrunning section's path doesn't require up.</p>
			<h4>Guard skip</h4>
			<p>Same, see the speedrunning part.</p>
			<h4>Pok&eacute;dex flags are weird</h4>
			<p>
				The easiest way to get this one is to mark a Pokemon as seen but not owned.
				<br />
				This achivement has programmed a bit lazily, and all that's really required is to have a different number of owned and seen Pokemon.
				<br />
				An easy way to get it is to GivePokemon with ID 00. It will mark Cubone as seen, but no Pokemon as caught.
			</p>
			<h4>Gullible</h4>
			<p>I didn't get how this one is performed yet. All I know is that in the dark room, you just need to use 4F to change the TileBlockPtr to any other value, then walk right and past all messages.<br />Yeniaul told me that doing ~16 steps right would work, but that didn't always count the achievement.</p>
			<h4>31337</h4>
			<p>See the detailed part below, it's a really convoluted one to get.<br />Well tbh, it's really easy to get. Once you figured out why you can't even through heavy cheating.</p>
			
			<h3>Gotta go fast !</h3>
			<p>Or : how to make fast times.</p>
			<p>
				This paragraph will document one aspect of the Gen I engine : the map engine.
				<br />
				My goal here isn't to fully describe it, but to describe how it has to be manipulated for our purposes.
				<br />
				<br />
				We'll start with something extremely simple : map data is taken from RAM. This is how the game usually applies changes (such as the stairs appearing in the Game Corner), and how Missingno. traps us everytime.
				<br />
				For this purpose, there exists a variable that's sometimes called Event Displacement (probably for historical reasons) but that I'll call Map Block Pointer.
				<br />
				The map block pointer is a pointer to a list of blocks (usually in RAM, but the game WILL work fine with it pointing to ROM). What are blocks ?
			</p>
			<p>
				As you may (or not) know, the Game Boy's renderer, like most of 8-bit and 16-bit consoles', is a tilemapper. Which means you write a piece of graphics, in the GB's case as in most others 8x8 pixels wide (for to technical comfort), then you "assemble" them on-screen.
				<br />
				(You may skip this line) I can tell from my experience (since I'm developing a GB game as I'm writing these lines) that storing these tiles in ROM then copying them to the renderer's memory (VRAM for Video RAM) is very ROM-consuming. Think of it like this : the screen is 18 tiles large and 20 tiles tall ; since one tile is mapped to 1 byte, a screen takes 18 * 20 = 360 bytes of memory. To store a hundred screens (not very much), you'd need to eat up 36 kb of memory.
				<br />
				The largest ROM size the GB can accept is 128 kb ; you'd eat nearly half of it in just screen data. If you then add other map properties, lag caused by copying... storing these 8x8 pixel tiles individually doesn't make sense, also because when Generation I came out this 128 kb technology didn't even exist. And because it would have costed way too much more than a whole lotta bunch of money. Read : too much.
				<br />
				The developers applied a technique fairly common, that is to instead store 2x2 grids of those 8x8 pixel tiles, and store the combinations.
				<br />
				To say it differently, instead of storing separately "here are tiles $4E, $4F, $50 and $51", they stored "here is a tree square" and somewhere else "a tree is tiles $4E, $4F, $50 and $51". It makes sense, AND saves a lot of RAM. Definitely a good idea. Those 16x16 "squares" (I'll keep this term from now onwards, but keep in mind the terminology is a bit floaty and "tiles" may be used to refer to 8x8 physical units as well as 16x16 or 32x32 logical units, pay attention to the context) are the smallest logic unit (the player walks on a 16x16 pixel grid, the game redraws the map by rows or columns 16 pixels thick, etc.).
			</p>
			<p>
				However, Gen I's devs pushed the logic one step further : instead of storing these squares independently, they applied the same logic to them and created 2x2 "blocks" of squares. If you followed, you understood that a "block" is 32x32 pixels. If you didn't, here is an image :
				<br />
				<figure>
					<img src="blk.png" alt="Explanatory image for above paragraphs." />
					<figcaption>Fig. 1 : examples taken from French Gen I. This doesn't depend on the version, though.</figcaption>
				</figure>
			</p>
			<p>
				Now you'll understand why the map is arranged like that when you go out of bounds. This may also strike a chord for those familiar with Glitch City RAM Manipulation.
				<br />
				Now, what is that Map Block Pointer variable I talked about a bunch of lines above ? It's a pointer to where the game will read the map blocks from.
				<br />
				Bear this in mind through this section, which will describe the other part of map data : coordinates.
				<br />
				The game has an X and a Y coordinate. The Y axis is the vertical axis, and the Y coordinate increases as you go down. The X coordinate increases as you go right.
			</p>
			<p>
				Now, what are each of the elements used for ? It's there that it becomes weird : some of you might think that the Map Block Pointer is a base pointer, and the source pointer is calculated using the coordinates, but <b>nope</b> !
				<br />
				As with many elements of Gen I, there is redundancy. And this one gets annoying when hacking map data. Because the Map Block Pointer is used for "background" collision and display, but the coordinates are used for sprite and warp interaction, and transitioning between maps.
				<br />
				tl;dr : modifying your coordinates will move you, but the background and its collision will move with you. Yay !
			</p>
			<p>
				So, how to fully move you somewhere ? You have to change your coordinates then fiddle a bit with the Map Block Pointer so it becomes right.
				<br />
				Also woth noting is that the pointer is only changed once every two steps, and there are two variables tracking your position within your current block.
				<br />
				This technique is cool but slow and it's complicated. Even I am getting lost in this explanation at this point. So I'll introduce you to another, better, technique.
			</p>
			
			<h3>FASTER MENNER</h3>
			<p>
				To go faster, you need to think outside the box. You'll stay within the imposed box (generating a correct password then submitting it), of course, but there are different-sized boxes.
				<br />
				Let's rant a bit about them.
			</p>
			<p>
				The smallest box is using the easy methods, taking the easy path, dong what the game hints you at doing. For example using WTW in the first room, then buying RIVAL's, etc.
				<br />
				This is the most "intended" method of solving all the puzzles ; it yields a time I'll be talking about as "below average" (don't question it, darnit !) and can at most give you 4 achievements if you try.
				<br />
				This is not our goal here. Our goal is to escape that box : since we're "allowed" to use direct RAM manipulation, let's use it for heavier physics manipulation.
				<br />
				The above section's goal was getting outside of this box : instead of using the D-Pad to go to the desired location, let's just "be" there without moving. But by doing this, you stay inside another box :
				<br />
				You keep the principle of "I must go to the goal".
			</p>
			<p>
				<b>WHAT IF...</b> <s>Fox's lasers were Falcon Punches</s> we moved the goal to us ?
				<br />
				Sounds a lot more interesting, huh ? And it's much simpler than manipulating your position. Aww yea.
			</p>
			<p class="lead">
				<small>Now introducing...</small> Warp Displacement.
			</p>
			<p>
				First of all, let's talk about warps. Warps are stored, in this game, as an array of 4-byte entries.
				<br />
				<code>
					struct Warp {<br />
						unsigned char YCoord;<br />
						unsigned char XCoord;<br />
						unsigned char DestWarpPoint;<br />
						unsigned char DestWarpMap;<br />
					}
				</code>
				<br />
				I think YCoord and XCoord are pretty self-explanatory.
				<br />
				DestWarpMap is the ID of map the warp points to. $FF is a bit special...
			</p>
			
			<hr>
			
			<h1>Keygen</h1>
			<p><a href="keygen.html">Here.</a></p>
			
			<hr>
			
			<footer>
				<p>&copy; 2016 and onwards to infinity, ISSOtm</p>
			</footer>
		</div> <!-- /container -->
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	</body>
</html>
